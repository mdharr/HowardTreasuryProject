<mat-toolbar class="navbar">
  <mat-toolbar-row id="mat-toolbar-menu-row">
    <div class="menu-btn-wrapper">
      <button class="menu-button" style="margin-right: 5px;" mat-icon-button (click)="toggleMenu()">
        <mat-icon *ngIf="!this.isMenuOpen">menu</mat-icon>
        <mat-icon *ngIf="this.isMenuOpen">close</mat-icon>
      </button>

      <div class="logo-menu-wrapper">
        <!-- Centered Flex Container -->
        <div class="logo-box" [routerLink]="['/home']" (click)="menuState === 'expanded' ? toggleMenu() : null">
          <div style="display:flex;">
            <div class="logo-img">
              <img style="width: 43px; height: 41px;" src="https://cafans.b-cdn.net/images/Category_2871/subcat_124271/gianni_solomonkane.jpg" alt="">
            </div>
            <h1 class="app-logo">The Robert E. Howard Treasury</h1>
            <h1 class="small-app-logo">REH Treasury</h1>
          </div>
        </div>

        <!-- Button to trigger the menu -->
        <button id="nav-menu-btn" mat-button [matMenuTriggerFor]="menu">Menu<span>
          <mat-icon style="vertical-align: top; padding-top: 3px;">
            arrow_drop_down
            </mat-icon>
          </span>
        </button>
      </div>
    </div>

  <div class="search-auth-wrapper">
    <!-- Auth Buttons Container -->
    <div class="auth-container">
      <button class="navbar-btn-group" mat-button *ngIf="!loggedIn()" (click)="openLoginDialog()">
        <span class="login-text">Log in</span>
      </button>
      <button class="navbar-btn-group" mat-button *ngIf="!loggedIn()" (click)="openSignupDialog()">
        <span class="register-text">Register</span>
      </button>

      <button class="navbar-btn-group" mat-button *ngIf="loggedIn()" [routerLink]="['/profile']">
        <span class="profile-text">
          {{ loggedInUser.username }}
        </span>
      </button>
      <div *ngIf="loggedIn()">
        <app-logout></app-logout>
      </div>
    </div>

    <div class="flex-menu-row">
      <div class="search-container">
        <input class="search-input-field" [(ngModel)]="searchQuery" (keyup.enter)="performSearchNoMenu()" placeholder="Search ...">
        <button mat-icon-button class="search-button" (click)="performSearchNoMenu()">
          <mat-icon class="search-icon">search</mat-icon>
        </button>
      </div>
    </div>

  </div>

  </mat-toolbar-row>
</mat-toolbar>


<div class="menu" [@expandMenu]="menuState">
  <!-- Menu content goes here -->
  <div class="auth-menu-row" (click)="toggleMenu()">
      <button class="navbar-btn-group" mat-button *ngIf="!loggedIn()" (click)="openLoginDialog()">
        <span class="login-text">Log in</span>
      </button>
      <button class="navbar-btn-group" mat-button *ngIf="!loggedIn()" (click)="openSignupDialog()">
        <span class="register-text">Register</span>
      </button>

      <button class="profile-button" mat-button *ngIf="loggedIn()" [routerLink]="['/profile']"><span class="profile-text">{{ loggedInUser.username }}</span></button>
      <div *ngIf="loggedIn()" style="flex:1; padding-right:10px;">
        <app-logout></app-logout>
      </div>
  </div>
  <div class="menu-row" (click)="toggleMenu()" [routerLink]="['/about']">About</div>
  <div class="menu-row" (click)="toggleMenu()" [routerLink]="['/collections']">Collections</div>
  <div class="menu-row" (click)="toggleMenu()" [routerLink]="['/stories']">Stories</div>
  <div class="menu-row" (click)="toggleMenu()" [routerLink]="['/poems']">Poems</div>
  <div class="menu-row" (click)="toggleMenu()" [routerLink]="['/miscellanea']">Miscellanea</div>
  <div class="menu-row" (click)="toggleMenu()" [routerLink]="['/characters']">Characters</div>
  <div class="menu-row" (click)="toggleMenu()" [routerLink]="['/posts']">Blog</div>
  <div class="menu-row">
    <!-- Inside navbar.component.html -->
    <div class="search-container">
      <input class="search-input-field" [(ngModel)]="searchQuery" (keyup.enter)="performSearch()" placeholder="Search ...">
      <button class="search-button" (click)="performSearch()"><mat-icon class="search-icon">search</mat-icon></button>
    </div>
  </div>
</div>

<!-- Define the menu -->
<mat-menu #menu="matMenu" class="menu-dropdown-btn">
  <button mat-menu-item routerLink="/about">About</button>
  <button mat-menu-item routerLink="/collections">Collections</button>
  <button mat-menu-item routerLink="/stories">Stories</button>
  <button mat-menu-item routerLink="/poems">Poems</button>
  <button mat-menu-item routerLink="/miscellanea">Miscellanea</button>
  <button mat-menu-item routerLink="/characters">Characters</button>
  <button mat-menu-item routerLink="/posts">Blog</button>
</mat-menu>

